{% extends "base.html" %}

{% block title %}SecurePass - Генератор паролів{% endblock %}

{% block head_extra %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="page-container-with-nav">
    <nav class="app-nav">
        <ul>
            <li><a href="{{ url_for('entries.dashboard') }}" {% if request.endpoint == 'entries.dashboard' %}class="active"{% endif %}><i class="bi bi-key-fill"></i> Мої паролі</a></li>
            {# ВИПРАВЛЕНО КІНЦЕВУ ТОЧКУ #}
            <li><a href="{{ url_for('entries.password_generator_page') }}" {% if request.endpoint == 'entries.password_generator_page' %}class="active"{% endif %}><i class="bi bi-magic"></i> Генератор паролів</a></li>
            <li><a href="{{ url_for('auth.manage_settings') }}" {% if request.endpoint == 'auth.manage_settings' %}class="active"{% endif %}><i class="bi bi-gear-fill"></i> Налаштування</a></li>
            <li><a href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-right"></i> Вихід</a></li>
        </ul>
    </nav>

    <div class="generator-content">
        <h4 class="text-white mb-4 border-bottom pb-3">Генератор надійних паролів</h4>

        <div class="options-panel mb-4">
            <div class="complexity-options">
                <button type="button" class="btn" data-complexity="easy">Легкий</button>
                <button type="button" class="btn" data-complexity="medium">Середній</button>
                <button type="button" class="btn active-complexity" data-complexity="strong">Складний</button>
                <button type="button" class="btn" data-complexity="passphrase">Парольна фраза</button>
                <button type="button" class="btn" data-complexity="pin">PIN-код</button>
            </div>
            <div class="criteria-display" id="criteriaDisplay">
                Оберіть рівень складності, щоб побачити критерії.
            </div>
        </div>

        <div class="row align-items-end mb-3 gy-3">
            <div class="col-md" id="passwordLengthContainer">
                <label for="passwordLength" class="form-label">Довжина пароля:</label>
                <div class="length-input-group">
                    <input type="number" class="form-control form-control-sm" id="passwordLength" value="16" min="8" max="128">
                </div>
                <div class="invalid-feedback" id="passwordLengthError" style="display: none; width: 100%;"></div> {# ОНОВЛЕНО: Додано для помилок #}
            </div>
            <div class="col-md" id="lengthOptionContainer" style="display: none;">
                <label for="pinLength" class="form-label">Довжина PIN:</label>
                <div class="length-input-group">
                    <input type="number" class="form-control form-control-sm" id="pinLength" value="4" min="4" max="10">
                </div>
                <div class="invalid-feedback" id="pinLengthError" style="display: none; width: 100%;"></div> {# ОНОВЛЕНО: Додано для помилок #}
            </div>
            <div class="col-md" id="passphraseWordsContainer" style="display: none;">
                <label for="passphraseWords" class="form-label">Кількість слів:</label>
                <div class="length-input-group">
                    <input type="number" class="form-control form-control-sm" id="passphraseWords" value="4" min="2" max="8">
                </div>
                <div class="invalid-feedback" id="passphraseWordsError" style="display: none; width: 100%;"></div> {# ОНОВЛЕНО: Додано для помилок #}
            </div>
        </div>
        
        <div class="mb-3">
            <label for="generatedPasswordPage" class="form-label">Згенерований пароль:</label>
            <div class="input-group">
                <input type="text" class="form-control generated-password-field" id="generatedPasswordPage" readonly placeholder="Натисніть 'Згенерувати'">
                <button class="btn btn-copy-password text-white" type="button" id="copyPasswordBtnPage" title="Копіювати в буфер обміну" data-bs-toggle="tooltip" data-bs-placement="top">
                    <i class="bi bi-clipboard-check"></i>
                </button>
            </div>
        </div>

        <div class="action-buttons-generator">
            <button type="button" class="btn btn-custom-action" id="generateBtnPage"><i class="bi bi-arrow-repeat"></i> Згенерувати</button>
        </div>
        
    </div>
</div>
{% endblock %}

{% block footer_scripts %}
    {{ super() }}
    <script>
        const GENERATE_PASSWORD_API_URL = "{{ url_for('entries.generate_password_api') }}";
    </script>
    <script src="{{ url_for('static', filename='js/password_generator_page.js') }}"></script>
{% endblock %}